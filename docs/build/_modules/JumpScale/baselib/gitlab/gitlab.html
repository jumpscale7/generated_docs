<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>JumpScale.baselib.gitlab.gitlab &mdash; Jumpscale Doc 7.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="Jumpscale Doc 7.0 documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Jumpscale Doc 7.0 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for JumpScale.baselib.gitlab.gitlab</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">pyapi-gitlab, a gitlab python wrapper for the gitlab API</span>
<span class="sd">by Itxaka Serrano Garcia &lt;itxakaserrano@gmail.com&gt;</span>
<span class="sd">now changes also by jumpscale team</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ujson</span> <span class="kn">as</span> <span class="nn">json</span>
<span class="k">except</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">json</span>
    
<span class="kn">import</span> <span class="nn">markdown</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">JumpScale</span> <span class="kn">import</span> <span class="n">j</span>


<div class="viewcode-block" id="Gitlab"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab">[docs]</a><span class="k">class</span> <span class="nc">Gitlab</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gitlab class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">verify_ssl</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        on init we setup the token used for all the api calls and all the urls</span>
<span class="sd">        :param host: host of gitlab</span>
<span class="sd">        :param token: token</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">token</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;PRIVATE-TOKEN&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">host</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;/&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;http://&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s">&#39;http://&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">+</span> <span class="s">&quot;/api/v3&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="s">&quot;/projects&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="s">&quot;/users&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="s">&quot;/user/keys&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="s">&quot;/groups&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="s">&quot;/projects/search/&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span> <span class="o">=</span> <span class="n">verify_ssl</span>


<div class="viewcode-block" id="Gitlab.login"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.login">[docs]</a>    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logs the user in and setups the header with the private token</span>
<span class="sd">        :param user: gitlab user</span>
<span class="sd">        :param password: gitlab password</span>
<span class="sd">        :return: True if login successfull</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;email&quot;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">+</span> <span class="s">&quot;/api/v3/session&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> 
                                <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;connection&quot;</span><span class="p">:</span> <span class="s">&quot;close&quot;</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))[</span><span class="s">&#39;private_token&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;PRIVATE-TOKEN&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">,</span>
                            <span class="s">&quot;connection&quot;</span><span class="p">:</span> <span class="s">&quot;close&quot;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">HttpError</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s">&#39;message&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.load"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getUsersInit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getProjectsInit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getGroupsInit</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_getProjectsInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @return [[name,id,owner]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects2id</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">projects</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getprojects</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">projects</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">projects</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;namespace&quot;</span><span class="p">][</span><span class="s">&quot;name&quot;</span><span class="p">]])</span>
                <span class="n">key</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">__</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;namespace&quot;</span><span class="p">][</span><span class="s">&quot;name&quot;</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">projects2id</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not list projects&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getUsersInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users2id</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">users</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getusers</span><span class="p">()</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">users</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s">&quot;state&quot;</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;active&quot;</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;username&quot;</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]])</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;username&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">users2id</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not get users for cache&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getGroupsInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groups2id</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">items</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getgroups</span><span class="p">()</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">groups2id</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]]</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not get users for cache&quot;</span><span class="p">)</span>            

<div class="viewcode-block" id="Gitlab.getusers"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getusers">[docs]</a>    <span class="k">def</span> <span class="nf">getusers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a user list</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        return: returs a dictionary of the users, false if there is an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not get users&quot;</span><span class="p">)</span>
            <span class="c"># return False</span>
</div>
<div class="viewcode-block" id="Gitlab.existsUser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.existsUser">[docs]</a>    <span class="k">def</span> <span class="nf">existsUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">users2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>            
</div>
<div class="viewcode-block" id="Gitlab.getUserId"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getUserId">[docs]</a>    <span class="k">def</span> <span class="nf">getUserId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">users2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not find user with name:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users2id</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.getProjectId"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getProjectId">[docs]</a>    <span class="k">def</span> <span class="nf">getProjectId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namespace</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">__</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">projects2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not find project with owner:</span><span class="si">%s</span><span class="s"> and name:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects2id</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.existsProject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.existsProject">[docs]</a>    <span class="k">def</span> <span class="nf">existsProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namespace</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">__</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">projects2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Gitlab.getGroupId"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getGroupId">[docs]</a>    <span class="k">def</span> <span class="nf">getGroupId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not find group with name:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups2id</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.existsGroup"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.existsGroup">[docs]</a>    <span class="k">def</span> <span class="nf">existsGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">name</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups2id</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Gitlab.getuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getuser">[docs]</a>    <span class="k">def</span> <span class="nf">getuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get info for a user identified by id</span>
<span class="sd">        :param id_: id of the user</span>
<span class="sd">        :return: False if not found, a dictionary if found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;could not get user with id:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="nb">id</span><span class="p">)</span>
            <span class="c"># return False</span>
</div>
<div class="viewcode-block" id="Gitlab.createuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createuser">[docs]</a>    <span class="k">def</span> <span class="nf">createuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                   <span class="n">username</span><span class="p">,</span>
                   <span class="n">password</span><span class="p">,</span>
                   <span class="n">email</span><span class="p">,</span>
                   <span class="n">skype</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">linkedin</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">twitter</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">projects_limit</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">extern_uid</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">provider</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">bio</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                   <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a user</span>
<span class="sd">        :param name: Obligatory</span>
<span class="sd">        :param username: Obligatory</span>
<span class="sd">        :param password: Obligatory</span>
<span class="sd">        :param email: Obligatory</span>
<span class="sd">        :return: TRue if the user was created,false if it wasn&#39;t(already exists)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
                <span class="s">&quot;email&quot;</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span> <span class="s">&quot;skype&quot;</span><span class="p">:</span> <span class="n">skype</span><span class="p">,</span>
                <span class="s">&quot;twitter&quot;</span><span class="p">:</span> <span class="n">twitter</span><span class="p">,</span> <span class="s">&quot;linkedin&quot;</span><span class="p">:</span> <span class="n">linkedin</span><span class="p">,</span>
                <span class="s">&quot;projects_limit&quot;</span><span class="p">:</span> <span class="n">projects_limit</span><span class="p">,</span> <span class="s">&quot;extern_uid&quot;</span><span class="p">:</span> <span class="n">extern_uid</span><span class="p">,</span>
                <span class="s">&quot;provider&quot;</span><span class="p">:</span> <span class="n">provider</span><span class="p">,</span> <span class="s">&quot;bio&quot;</span><span class="p">:</span> <span class="n">bio</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;password&quot;</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;****&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;could not create user </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">data</span><span class="p">)</span>
            <span class="c"># return False</span>
</div>
<div class="viewcode-block" id="Gitlab.deleteuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deleteuser">[docs]</a>    <span class="k">def</span> <span class="nf">deleteuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes an user by ID</span>
<span class="sd">        :param id_: id of the user to delete</span>
<span class="sd">        :return: True if it deleted, False if it couldn&#39;t. False could happen</span>
<span class="sd">        for several reasons, but there isn&#39;t a</span>
<span class="sd">        good way of differenting them</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.currentuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.currentuser">[docs]</a>    <span class="k">def</span> <span class="nf">currentuser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current user parameters. The current user is linked</span>
<span class="sd">        to the secret token</span>
<span class="sd">        :return: a list with the current user properties</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">+</span> <span class="s">&quot;/api/v3/user&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Gitlab.edituser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.edituser">[docs]</a>    <span class="k">def</span> <span class="nf">edituser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span>
                 <span class="n">name</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">username</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">password</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">email</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">skype</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">linkedin</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">twitter</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">projects_limit</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">extern_uid</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">provider</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">bio</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edits an user data. Unfortunately we have to check ALL the params,</span>
<span class="sd">        as they can&#39;t be empty or the user will get all their data empty,</span>
<span class="sd">        so we only send the filled params</span>
<span class="sd">        :param id_: id of the user to change</span>
<span class="sd">        :param name: name</span>
<span class="sd">        :param username: username</span>
<span class="sd">        :param password: pass</span>
<span class="sd">        :param email: email</span>
<span class="sd">        :param skype: skype</span>
<span class="sd">        :param linkedin: linkedin</span>
<span class="sd">        :param twitter: twitter</span>
<span class="sd">        :param projects_limit: the limits project, default is 10</span>
<span class="sd">        :param extern_uid: no idea</span>
<span class="sd">        :param provider: google login for example</span>
<span class="sd">        :param bio: bio</span>
<span class="sd">        :param sudo: do the task as the user provided</span>
<span class="sd">        :return: alway true as gitlab answers with a 404</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">username</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;username&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
        <span class="k">if</span> <span class="n">password</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;password&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>
        <span class="k">if</span> <span class="n">email</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;email&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email</span>
        <span class="k">if</span> <span class="n">skype</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;skype&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">skype</span>
        <span class="k">if</span> <span class="n">linkedin</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;linkedin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">linkedin</span>
        <span class="k">if</span> <span class="n">twitter</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;twitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">twitter</span>
        <span class="k">if</span> <span class="n">projects_limit</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;projects_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">projects_limit</span>
        <span class="k">if</span> <span class="n">extern_uid</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;extern_uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">extern_uid</span>
        <span class="k">if</span> <span class="n">provider</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;provider&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">provider</span>
        <span class="k">if</span> <span class="n">bio</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;bio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bio</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="c"># There is a problem here and that is that the api always return 404,</span>
        <span class="c">#  doesn&#39;t matter what heappened with the request,</span>
        <span class="c"># so now way of knowing what happened</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsshkeys"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsshkeys">[docs]</a>    <span class="k">def</span> <span class="nf">getsshkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets all the ssh keys for the current user</span>
<span class="sd">        :return: a dictionary with the lists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsshkey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsshkey">[docs]</a>    <span class="k">def</span> <span class="nf">getsshkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a single ssh key identified by id_</span>
<span class="sd">        :param id_: the id of the key</span>
<span class="sd">        :return: the key itself</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addsshkey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addsshkey">[docs]</a>    <span class="k">def</span> <span class="nf">addsshkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new ssh key for the current user</span>
<span class="sd">        :param title: title of the new key</span>
<span class="sd">        :param key: the key itself</span>
<span class="sd">        :return: true if added, false if it didn&#39;t add it</span>
<span class="sd">        (it could be because the name or key already exists)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> 
                                <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addsshkeyuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addsshkeyuser">[docs]</a>    <span class="k">def</span> <span class="nf">addsshkeyuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new ssh key for the user identified by id</span>
<span class="sd">        :param id_: id of the user to add the key to</span>
<span class="sd">        :param title: title of the new key</span>
<span class="sd">        :param key: the key itself</span>
<span class="sd">        :return: true if added, false if it didn&#39;t add it</span>
<span class="sd">        (it could be because the name or key already exists)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/keys&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletesshkey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletesshkey">[docs]</a>    <span class="k">def</span> <span class="nf">deletesshkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes an sshkey for the current user identified by id</span>
<span class="sd">        :param id_: the id of the key</span>
<span class="sd">        :return: False if it didn&#39;t delete it, True if it was deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span> <span class="o">==</span> <span class="s">&quot;null&quot;</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojects"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojects">[docs]</a>    <span class="k">def</span> <span class="nf">getprojects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of all the projects</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        :return: list with the repo name, description, last activity,</span>
<span class="sd">         web url, ssh url, owner and if its public</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getallprojects"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getallprojects">[docs]</a>    <span class="k">def</span> <span class="nf">getallprojects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of all the projects for admins only</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        :return: list with the repo name, description, last activity,</span>
<span class="sd">         web url, ssh url, owner and if its public</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&#39;/all&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getproject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getproject">[docs]</a>    <span class="k">def</span> <span class="nf">getproject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get info for a project identified by id</span>
<span class="sd">        :param id_: id of the project</span>
<span class="sd">        :return: False if not found, a dictionary if found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojectevents"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojectevents">[docs]</a>    <span class="k">def</span> <span class="nf">getprojectevents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the project identified by id, events(commits)</span>
<span class="sd">        :param id_: id of the project</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        :return: False if no project with that id, a dictionary</span>
<span class="sd">         with the events if found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/events&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> 
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createproject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createproject">[docs]</a>    <span class="k">def</span> <span class="nf">createproject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                      <span class="n">issues_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wall_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                      <span class="n">merge_requests_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wiki_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                      <span class="n">snippets_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s">&quot;admin&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a project</span>
<span class="sd">        :param name: Obligatory</span>
<span class="sd">        :return: Dict of information on the newly created project if successful,</span>
<span class="sd">         False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;issues_enabled&quot;</span><span class="p">:</span> <span class="n">issues_enabled</span><span class="p">,</span> <span class="s">&quot;wall_enabled&quot;</span><span class="p">:</span> <span class="n">wall_enabled</span><span class="p">,</span>
                <span class="s">&quot;merge_requests_enabled&quot;</span><span class="p">:</span> <span class="n">merge_requests_enabled</span><span class="p">,</span>
                <span class="s">&quot;wiki_enabled&quot;</span><span class="p">:</span> <span class="n">wiki_enabled</span><span class="p">,</span>
                <span class="s">&quot;snippets_enabled&quot;</span><span class="p">:</span> <span class="n">snippets_enabled</span><span class="p">}</span>

        <span class="c"># if gitlab is the new 6th version, there is a public option for the</span>
        <span class="c"># project creation</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">public</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="k">if</span> <span class="n">public</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;public&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">public</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getProjectsInit</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
            <span class="k">if</span> <span class="s">&quot;Your own projects limit is 0&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Your own projects limit is 0&quot;</span><span class="p">)</span>
                <span class="c"># return False</span>
        <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;error 404:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>            
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Could not create project, msg:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="c"># return False</span>

</div>
<div class="viewcode-block" id="Gitlab.deleteproject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deleteproject">[docs]</a>    <span class="k">def</span> <span class="nf">deleteproject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: always true</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getProjectsInit</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">True</span>

</div>
<div class="viewcode-block" id="Gitlab.createprojectuser"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createprojectuser">[docs]</a>    <span class="k">def</span> <span class="nf">createprojectuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">default_branch</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">issues_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wall_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                          <span class="n">merge_requests_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wiki_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                          <span class="n">snippets_enabled</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a project for the given user identified by id</span>
<span class="sd">        :param id_: id of the user to crete the project for</span>
<span class="sd">        :param name: Obligatory</span>
<span class="sd">        :return: True if it created the project, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;default_branch&quot;</span><span class="p">:</span> <span class="n">default_branch</span><span class="p">,</span>
                <span class="s">&quot;issues_enabled&quot;</span><span class="p">:</span> <span class="n">issues_enabled</span><span class="p">,</span> <span class="s">&quot;wall_enabled&quot;</span><span class="p">:</span> <span class="n">wall_enabled</span><span class="p">,</span>
                <span class="s">&quot;merge_requests_enabled&quot;</span><span class="p">:</span> <span class="n">merge_requests_enabled</span><span class="p">,</span>
                <span class="s">&quot;wiki_enabled&quot;</span><span class="p">:</span> <span class="n">wiki_enabled</span><span class="p">,</span>
                <span class="s">&quot;snippets_enabled&quot;</span><span class="p">:</span> <span class="n">snippets_enabled</span><span class="p">}</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">public</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="k">if</span> <span class="n">public</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;public&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">public</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/user/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">),</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getProjectsInit</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listprojectmembers"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listprojectmembers">[docs]</a>    <span class="k">def</span> <span class="nf">listprojectmembers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lists the members of a given project id</span>
<span class="sd">        :param id_: the project id</span>
<span class="sd">        :return: the projects memebers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/members&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addprojectmember"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addprojectmember">[docs]</a>    <span class="k">def</span> <span class="nf">addprojectmember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">access_level</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="c"># check the access level and put into a number</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        adds a project member to a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param user_id: user id</span>
<span class="sd">        :param access_level: access level, see gitlab help to know more</span>
<span class="sd">        :param sudo: do the request with another user</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;master&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;developer&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;reporter&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s">&quot;access_level&quot;</span><span class="p">:</span> <span class="n">access_level</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/members&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.editprojectmember"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.editprojectmember">[docs]</a>    <span class="k">def</span> <span class="nf">editprojectmember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">access_level</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        edit a project member</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param user_id: user id</span>
<span class="sd">        :param access_level: access level</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;master&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;developer&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;reporter&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
                <span class="s">&quot;access_level&quot;</span><span class="p">:</span> <span class="n">access_level</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/members/&quot;</span>
                               <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deleteprojectmember"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deleteprojectmember">[docs]</a>    <span class="k">def</span> <span class="nf">deleteprojectmember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a project member</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param user_id: user id</span>
<span class="sd">        :return: always true</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
                                  <span class="o">+</span> <span class="s">&quot;/members/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>  <span class="c"># It always returns true</span>

    <span class="c"># TODO: hooks are now system wide and under the /hooks url</span>
    <span class="c"># TODO: change all the hooks methods, not valid anymore</span>
    <span class="c"># TODO: write tests for the hooks</span></div>
<div class="viewcode-block" id="Gitlab.getprojecthooks"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojecthooks">[docs]</a>    <span class="k">def</span> <span class="nf">getprojecthooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get all the hooks from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: the hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/hooks&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojecthook"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojecthook">[docs]</a>    <span class="k">def</span> <span class="nf">getprojecthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">hook_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get a particular hook from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param hook_id: hook id</span>
<span class="sd">        :return: the hook</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/hooks/&quot;</span> <span class="o">+</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">hook_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addprojecthook"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addprojecthook">[docs]</a>    <span class="k">def</span> <span class="nf">addprojecthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add a hook to a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param url: url of the hook</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/hooks&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.editprojecthook"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.editprojecthook">[docs]</a>    <span class="k">def</span> <span class="nf">editprojecthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">hook_id</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        edit an existing hook from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param hook_id: hook id</span>
<span class="sd">        :param url: the new url</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;hook_id&quot;</span><span class="p">:</span> <span class="n">hook_id</span><span class="p">,</span> <span class="s">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/hooks/&quot;</span> <span class="o">+</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">hook_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deleteprojecthook"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deleteprojecthook">[docs]</a>    <span class="k">def</span> <span class="nf">deleteprojecthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">hook_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        delete a project hook</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param hook_id: hook id</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
                                  <span class="o">+</span> <span class="s">&quot;/hooks/&quot;</span>
                                  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">hook_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listbranches"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listbranches">[docs]</a>    <span class="k">def</span> <span class="nf">listbranches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        list all the branches from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: the branches</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listbranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listbranch">[docs]</a>    <span class="k">def</span> <span class="nf">listbranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        list one branch from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param branch: branch id</span>
<span class="sd">        :return: the branch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.protectbranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.protectbranch">[docs]</a>    <span class="k">def</span> <span class="nf">protectbranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        protect a branch from changes</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param branch: branch id</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/protect&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.unprotectbranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.unprotectbranch">[docs]</a>    <span class="k">def</span> <span class="nf">unprotectbranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        stop protecting a branch</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param branch: branch id</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/unprotect&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createforkrelation"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createforkrelation">[docs]</a>    <span class="k">def</span> <span class="nf">createforkrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">from_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a fork relation. This DO NOT create a fork but only adds</span>
<span class="sd">        the relation between 2 repositories</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param from_: from id</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;forked_from_id&quot;</span><span class="p">:</span> <span class="n">from_</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                                <span class="s">&quot;/fork/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">from_</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.removeforkrelation"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.removeforkrelation">[docs]</a>    <span class="k">def</span> <span class="nf">removeforkrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        remove an existing fork relation. this DO NOT remove the fork,</span>
<span class="sd">        only the relation between them</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                                  <span class="s">&quot;/fork&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getissues"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getissues">[docs]</a>    <span class="k">def</span> <span class="nf">getissues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a global list of issues for your user.</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">+</span> <span class="s">&quot;/api/v3/issues&quot;</span><span class="p">,</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojectissues"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojectissues">[docs]</a>    <span class="k">def</span> <span class="nf">getprojectissues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of issues for project id_.</span>
<span class="sd">        :param id_: The id for the project.</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/issues&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojectissue"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojectissue">[docs]</a>    <span class="k">def</span> <span class="nf">getprojectissue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">issue_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get an specific issue id from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param issue_id: issue id</span>
<span class="sd">        :return: the issue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/issues/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">issue_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> 
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createissue"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createissue">[docs]</a>    <span class="k">def</span> <span class="nf">createissue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">assignee_id</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">milestone_id</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new issue</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param title: title of the issue</span>
<span class="sd">        :param description: description</span>
<span class="sd">        :param assignee_id: assignee for the issue</span>
<span class="sd">        :param milestone_id: milestone</span>
<span class="sd">        :param labels: label</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;assignee_id&quot;</span><span class="p">:</span> <span class="n">assignee_id</span><span class="p">,</span>
                <span class="s">&quot;milestone_id&quot;</span><span class="p">:</span> <span class="n">milestone_id</span><span class="p">,</span> <span class="s">&quot;labels&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/issues&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.editissue"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.editissue">[docs]</a>    <span class="k">def</span> <span class="nf">editissue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">issue_id</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                  <span class="n">assignee_id</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">milestone_id</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                  <span class="n">state_event</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        edit an existing issue data</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param issue_id: issue id</span>
<span class="sd">        :param title: title</span>
<span class="sd">        :param description: description</span>
<span class="sd">        :param assignee_id: asignee</span>
<span class="sd">        :param milestone_id: milestone</span>
<span class="sd">        :param labels: label</span>
<span class="sd">        :param state_event: state</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;issue_id&quot;</span><span class="p">:</span> <span class="n">issue_id</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">title</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
        <span class="k">if</span> <span class="n">description</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">if</span> <span class="n">assignee_id</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;assignee_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assignee_id</span>
        <span class="k">if</span> <span class="n">milestone_id</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;milestone_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">milestone_id</span>
        <span class="k">if</span> <span class="n">labels</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>
        <span class="k">if</span> <span class="n">state_event</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;state_event&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state_event</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/issues/&quot;</span> <span class="o">+</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">issue_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmilestones"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmilestones">[docs]</a>    <span class="k">def</span> <span class="nf">getmilestones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the milestones for a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: the milestones</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/milestones&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmilestone"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmilestone">[docs]</a>    <span class="k">def</span> <span class="nf">getmilestone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">milestone_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get an specific milestone</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param milestone_id: milestone id</span>
<span class="sd">        :return: the milestone</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
                               <span class="o">+</span> <span class="s">&quot;/milestones/&quot;</span>
                               <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">milestone_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createmilestone"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createmilestone">[docs]</a>    <span class="k">def</span> <span class="nf">createmilestone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">due_date</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new milestone</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param title: title</span>
<span class="sd">        :param description: description</span>
<span class="sd">        :param due_date: due date</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;due_date&quot;</span><span class="p">:</span> <span class="n">due_date</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span>
                                <span class="s">&quot;/milestones&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> 
                                <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.editmilestone"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.editmilestone">[docs]</a>    <span class="k">def</span> <span class="nf">editmilestone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">milestone_id</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span>
                      <span class="n">due_date</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">state_event</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        edit an existing milestone</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param milestone_id: milestone id</span>
<span class="sd">        :param title: title</span>
<span class="sd">        :param description: description</span>
<span class="sd">        :param due_date: due date</span>
<span class="sd">        :param state_event: state</span>
<span class="sd">        :param sudo: do the request as another user</span>
<span class="sd">        :return: true if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;milestone_id&quot;</span><span class="p">:</span> <span class="n">milestone_id</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;due_date&quot;</span><span class="p">:</span> <span class="n">due_date</span><span class="p">,</span> <span class="s">&quot;state_event&quot;</span><span class="p">:</span> <span class="n">state_event</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
                               <span class="o">+</span> <span class="s">&quot;/milestones/&quot;</span>
                               <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">milestone_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listdeploykeys"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listdeploykeys">[docs]</a>    <span class="k">def</span> <span class="nf">listdeploykeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of a project&#39;s deploy keys.</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :return: the keys in a dictionary if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/keys&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listdeploykey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listdeploykey">[docs]</a>    <span class="k">def</span> <span class="nf">listdeploykey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">key_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a single key.</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param key_id: key id</span>
<span class="sd">        :return: the key in a dict if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/keys/&quot;</span> <span class="o">+</span>
                               <span class="nb">str</span><span class="p">(</span><span class="n">key_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.adddeploykey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.adddeploykey">[docs]</a>    <span class="k">def</span> <span class="nf">adddeploykey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new deploy key for a project.</span>
<span class="sd">        If deploy key already exists in another project - it will be joined</span>
<span class="sd">        to project but only if original one was is accessible by same user</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param title: title of the key</span>
<span class="sd">        :param key: the key itself</span>
<span class="sd">        :return: true if sucess, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/keys&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletedeploykey"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletedeploykey">[docs]</a>    <span class="k">def</span> <span class="nf">deletedeploykey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">key_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a deploy key from a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param key_id: key id to delete</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/keys/&quot;</span>
                                  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getreadme"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getreadme">[docs]</a>    <span class="k">def</span> <span class="nf">getreadme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repo</span><span class="p">,</span> <span class="n">mark</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns the readme</span>
<span class="sd">        :param mark: If false returns the raw readme,</span>
<span class="sd">        else returns the readme parsed by markdown</span>
<span class="sd">        :param repo: the web url to the project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">repo</span> <span class="o">+</span> <span class="s">&quot;/raw/master/README.md?private_token=&quot;</span> <span class="o">+</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>  <span class="c"># setting the headers doesn&#39;t work</span>
        <span class="k">if</span> <span class="s">&quot;&lt;!DOCTYPE html&gt;&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>  <span class="c"># having HTML means a 404</span>
            <span class="k">if</span> <span class="n">mark</span><span class="p">:</span>
                <span class="k">return</span> <span class="s">&quot;&lt;p&gt;There isn&#39;t a README.md for that project&lt;/p&gt;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s">&quot;There isn&#39;t a README.md for that project&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mark</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">markdown</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span>
</div>
<div class="viewcode-block" id="Gitlab.creategroup"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.creategroup">[docs]</a>    <span class="k">def</span> <span class="nf">creategroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new group</span>
<span class="sd">        :param name: The name of the group</span>
<span class="sd">        :param path: The path for the group</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span><span class="p">,</span>
                                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">},</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span>
        <span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">HttpError</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s">&#39;message&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.getgroups"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getgroups">[docs]</a>    <span class="k">def</span> <span class="nf">getgroups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve group information</span>
<span class="sd">        :param id_: Specify a group. Otherwise, all groups are returned</span>
<span class="sd">        :param page: Which page to return (default is 1)</span>
<span class="sd">        :param per_page: Number of items to return per page (default is 20)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;{0}/{1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span><span class="p">,</span>
                                                <span class="n">id_</span> <span class="k">if</span> <span class="n">id_</span> <span class="k">else</span> <span class="s">&quot;&quot;</span><span class="p">),</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.moveproject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.moveproject">[docs]</a>    <span class="k">def</span> <span class="nf">moveproject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move a given project into a given group</span>
<span class="sd">        :param group_id: ID of the destination group</span>
<span class="sd">        :param project_id: ID of the project to be moved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;{0}/{1}/projects/{2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span><span class="p">,</span>
                                                              <span class="n">group_id</span><span class="p">,</span>
                                                              <span class="n">project_id</span><span class="p">),</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmergerequests"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmergerequests">[docs]</a>    <span class="k">def</span> <span class="nf">getmergerequests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all the merge requests for a project.</span>
<span class="sd">        :param project_id: ID of the project to retrieve merge requests for</span>
<span class="sd">        :param page: If pagination is set, which page to return</span>
<span class="sd">        :param per_page: Number of merge requests to return per page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="s">&#39;{0}/{1}/merge_requests&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span> <span class="n">project_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_str</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmergerequest"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmergerequest">[docs]</a>    <span class="k">def</span> <span class="nf">getmergerequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">mergerequest_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about a specific merge request.</span>
<span class="sd">        :type project_id: int</span>
<span class="sd">        :param project_id: ID of the project</span>
<span class="sd">        :param mergerequest_id: ID of the merge request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="s">&#39;{0}/{1}/merge_request/{2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span>
                                                     <span class="n">project_id</span><span class="p">,</span>
                                                     <span class="n">mergerequest_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_str</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createmergerequest"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createmergerequest">[docs]</a>    <span class="k">def</span> <span class="nf">createmergerequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">sourcebranch</span><span class="p">,</span> <span class="n">targetbranch</span><span class="p">,</span>
                           <span class="n">title</span><span class="p">,</span> <span class="n">assignee_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new merge request.</span>
<span class="sd">        :param project_id: ID of the project originating the merge request</span>
<span class="sd">        :param sourcebranch: name of the branch to merge from</span>
<span class="sd">        :param targetbranch: name of the branch to merge to</span>
<span class="sd">        :param title: Title of the merge request</span>
<span class="sd">        :param assignee_id: Assignee user ID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="s">&#39;{0}/{1}/merge_requests&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span> <span class="n">project_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;source_branch&#39;</span><span class="p">:</span> <span class="n">sourcebranch</span><span class="p">,</span>
                <span class="s">&#39;target_branch&#39;</span><span class="p">:</span> <span class="n">targetbranch</span><span class="p">,</span>
                <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                <span class="s">&#39;assignee_id&#39;</span><span class="p">:</span> <span class="n">assignee_id</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url_str</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> 
                                <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.updatemergerequest"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.updatemergerequest">[docs]</a>    <span class="k">def</span> <span class="nf">updatemergerequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">mergerequest_id</span><span class="p">,</span> <span class="n">sourcebranch</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">targetbranch</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">assignee_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an existing merge request.</span>
<span class="sd">        :param project_id: ID of the project originating the merge request</span>
<span class="sd">        :param mergerequest_id: ID of the merge request to update</span>
<span class="sd">        :param sourcebranch: name of the branch to merge from</span>
<span class="sd">        :param targetbranch: name of the branch to merge to</span>
<span class="sd">        :param title: Title of the merge request</span>
<span class="sd">        :param assignee_id: Assignee user ID</span>
<span class="sd">        :param closed: MR status.  True = closed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="s">&#39;{0}/{1}/merge_request/{2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span>
                                                     <span class="n">project_id</span><span class="p">,</span>
                                                     <span class="n">mergerequest_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;source_branch&#39;</span><span class="p">:</span> <span class="n">sourcebranch</span><span class="p">,</span>
                <span class="s">&#39;target_branch&#39;</span><span class="p">:</span> <span class="n">targetbranch</span><span class="p">,</span>
                <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                <span class="s">&#39;assignee_id&#39;</span><span class="p">:</span> <span class="n">assignee_id</span><span class="p">,</span>
                <span class="s">&#39;closed&#39;</span><span class="p">:</span> <span class="n">closed</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url_str</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> 
                                <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addcommenttomergerequest"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addcommenttomergerequest">[docs]</a>    <span class="k">def</span> <span class="nf">addcommenttomergerequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">mergerequest_id</span><span class="p">,</span> <span class="n">note</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a comment to a merge request.</span>
<span class="sd">        :param project_id: ID of the project originating the merge request</span>
<span class="sd">        :param mergerequest_id: ID of the merge request to comment on</span>
<span class="sd">        :param note: Text of comment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="s">&#39;{0}/{1}/merge_request/{2}/comments&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span><span class="p">,</span>
                                                              <span class="n">project_id</span><span class="p">,</span>
                                                              <span class="n">mergerequest_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url_str</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;note&#39;</span><span class="p">:</span> <span class="n">note</span><span class="p">},</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsnippets"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsnippets">[docs]</a>    <span class="k">def</span> <span class="nf">getsnippets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all the snippets of the project identified by project_id</span>
<span class="sd">        @param project_id: project id to get the snippets from</span>
<span class="sd">        @return: list of dictionaries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsnippet"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsnippet">[docs]</a>    <span class="k">def</span> <span class="nf">getsnippet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get one snippet from a project</span>
<span class="sd">        @param project_id: project id to get the snippet from</span>
<span class="sd">        @param snippet_id: snippet id</span>
<span class="sd">        @return: dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createsnippet"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createsnippet">[docs]</a>    <span class="k">def</span> <span class="nf">createsnippet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">lifetime</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an snippet</span>
<span class="sd">        @param project_id: project id to create the snippet under</span>
<span class="sd">        @param title: title of the snippet</span>
<span class="sd">        @param file_name: filename for the snippet</span>
<span class="sd">        @param code: content of the snippet</span>
<span class="sd">        @param lifetime: expiration date</span>
<span class="sd">        @return: True if correct, false if failed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">project_id</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s">&quot;file_name&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">lifetime</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&quot;lifetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lifetime</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets&quot;</span><span class="p">,</span>
                                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsnippetcontent"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsnippetcontent">[docs]</a>    <span class="k">def</span> <span class="nf">getsnippetcontent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/raw&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletesnippet"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletesnippet">[docs]</a>    <span class="k">def</span> <span class="nf">deletesnippet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                                  <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getrepositories"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getrepositories">[docs]</a>    <span class="k">def</span> <span class="nf">getrepositories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/repository/branches&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getrepositorybranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getrepositorybranch">[docs]</a>    <span class="k">def</span> <span class="nf">getrepositorybranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))[</span><span class="s">&#39;message&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;404 Branch does not exist Not Found&quot;</span><span class="p">:</span>
                <span class="c"># In the future we should raise an exception here</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.protectrepositorybranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.protectrepositorybranch">[docs]</a>    <span class="k">def</span> <span class="nf">protectrepositorybranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">branch_name</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/protect&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.unprotectrepositorybranch"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.unprotectrepositorybranch">[docs]</a>    <span class="k">def</span> <span class="nf">unprotectrepositorybranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">branch_name</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/branches/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/unprotect&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>
</div>
<div class="viewcode-block" id="Gitlab.listrepositorytags"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listrepositorytags">[docs]</a>    <span class="k">def</span> <span class="nf">listrepositorytags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/tags&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listrepositorycommits"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listrepositorycommits">[docs]</a>    <span class="k">def</span> <span class="nf">listrepositorycommits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/commits&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listrepositorycommit"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listrepositorycommit">[docs]</a>    <span class="k">def</span> <span class="nf">listrepositorycommit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">sha1</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/commits/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sha1</span><span class="p">),</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listrepositorycommitdiff"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listrepositorycommitdiff">[docs]</a>    <span class="k">def</span> <span class="nf">listrepositorycommitdiff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">sha1</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/commits/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sha1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/diff&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="c"># it returns a list of dicts, which is nonsense as we are requesting</span>
            <span class="c"># just one diff, so we use the [0] to return only the first and only</span>
            <span class="c"># element</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listrepositorytree"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listrepositorytree">[docs]</a>    <span class="k">def</span> <span class="nf">listrepositorytree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ref_name</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">if</span> <span class="n">ref_name</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;ref_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ref_name</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/tree/&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getrawblob"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getrawblob">[docs]</a>    <span class="k">def</span> <span class="nf">getrawblob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">sha1</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;filepath&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">}</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/blobs/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sha1</span><span class="p">),</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.searchproject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.searchproject">[docs]</a>    <span class="k">def</span> <span class="nf">searchproject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        projects section</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span> <span class="s">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">search</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">HttpError</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s">&#39;message&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.getfilearchive"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getfilearchive">[docs]</a>    <span class="k">def</span> <span class="nf">getfilearchive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">sha1</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        repository section</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s">&quot;/repository/archive&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filepath</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;content-disposition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;;&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">filesave</span><span class="p">:</span>
                <span class="n">filesave</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                <span class="c"># TODO: Catch oserror exceptions as no permissions and such</span>
                <span class="c"># TODO: change the filepath to a path and keep always the filename?</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">HttpError</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s">&#39;message&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Gitlab.deletegroup"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletegroup">[docs]</a>    <span class="k">def</span> <span class="nf">deletegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        groups section, new in 6.2</span>

<span class="sd">        Deletes an group by ID</span>
<span class="sd">        :param id_: id of the group to delete</span>
<span class="sd">        :return: True if it deleted, False if it couldn&#39;t. False could happen</span>
<span class="sd">        for several reasons, but there isn&#39;t a</span>
<span class="sd">        good way of differentiating them</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">group_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.listgroupmembers"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.listgroupmembers">[docs]</a>    <span class="k">def</span> <span class="nf">listgroupmembers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        list group members</span>
<span class="sd">        new in 6.2</span>

<span class="sd">        lists the members of a given group id</span>
<span class="sd">        :param group_id: the group id</span>
<span class="sd">        :return: the group&#39;s members</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">group_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/members&quot;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.addgroupmember"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.addgroupmember">[docs]</a>    <span class="k">def</span> <span class="nf">addgroupmember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">access_level</span><span class="p">,</span> <span class="n">sudo</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add a user to a group</span>
<span class="sd">        new in 6.2</span>

<span class="sd">        # check the access level and put into a number</span>

<span class="sd">        adds a project member to a project</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param user_id: user id</span>
<span class="sd">        :param access_level: access level, see gitlab help to know more</span>
<span class="sd">        :param sudo: do the request with another user</span>
<span class="sd">        :return: True if success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;master&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;developer&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">elif</span> <span class="n">access_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;reporter&quot;</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">access_level</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">group_id</span><span class="p">,</span> <span class="s">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s">&quot;access_level&quot;</span><span class="p">:</span> <span class="n">access_level</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">sudo</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s">&#39;sudo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sudo</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">group_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/members&quot;</span><span class="p">,</span>
                                <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletegroupmember"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletegroupmember">[docs]</a>    <span class="k">def</span> <span class="nf">deletegroupmember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a group member</span>
<span class="sd">        :param id_: project id</span>
<span class="sd">        :param user_id: user id</span>
<span class="sd">        :return: always true</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groups_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">group_id</span><span class="p">)</span>
                                  <span class="o">+</span> <span class="s">&quot;/members/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>  <span class="c"># It always returns true</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojectwallnotes"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojectwallnotes">[docs]</a>    <span class="k">def</span> <span class="nf">getprojectwallnotes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the notes from the wall of a project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getprojectwallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getprojectwallnote">[docs]</a>    <span class="k">def</span> <span class="nf">getprojectwallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">note_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get one note from the wall of the project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">note_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createprojectwallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createprojectwallnote">[docs]</a>    <span class="k">def</span> <span class="nf">createprojectwallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new note</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;body&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getissuewallnotes"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getissuewallnotes">[docs]</a>    <span class="k">def</span> <span class="nf">getissuewallnotes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">issue_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the notes from the wall of a issue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/issues/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">issue_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getissuewallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getissuewallnote">[docs]</a>    <span class="k">def</span> <span class="nf">getissuewallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">issue_id</span><span class="p">,</span> <span class="n">note_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get one note from the wall of the issue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/issues/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">issue_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">note_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createissuewallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createissuewallnote">[docs]</a>    <span class="k">def</span> <span class="nf">createissuewallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">issue_id</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new note</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;body&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/issues/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">issue_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsnippetwallnotes"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsnippetwallnotes">[docs]</a>    <span class="k">def</span> <span class="nf">getsnippetwallnotes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the notes from the wall of a snippet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getsnippetwallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getsnippetwallnote">[docs]</a>    <span class="k">def</span> <span class="nf">getsnippetwallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">,</span> <span class="n">note_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get one note from the wall of the snippet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">note_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createsnippetewallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createsnippetewallnote">[docs]</a>    <span class="k">def</span> <span class="nf">createsnippetewallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">snippet_id</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new note</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;body&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/snippets/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">snippet_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmergerequestwallnotes"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmergerequestwallnotes">[docs]</a>    <span class="k">def</span> <span class="nf">getmergerequestwallnotes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">merge_request_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the notes from the wall of a merge request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/merge_requests/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">merge_request_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.getmergerequestwallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.getmergerequestwallnote">[docs]</a>    <span class="k">def</span> <span class="nf">getmergerequestwallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">merge_request_id</span><span class="p">,</span> <span class="n">note_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get one note from the wall of the merge request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/merge_requests/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">merge_request_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">note_id</span><span class="p">),</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createmergerequestewallnote"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createmergerequestewallnote">[docs]</a>    <span class="k">def</span> <span class="nf">createmergerequestewallnote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">merge_request_id</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a new note</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;body&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/merge_requests/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">merge_request_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/notes&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.createfile"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.createfile">[docs]</a>    <span class="k">def</span> <span class="nf">createfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">branch_name</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">commit_message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new file in the repository</span>
<span class="sd">        :param project_id: project id</span>
<span class="sd">        :param file_path: Full path to new file. Ex. lib/class.rb</span>
<span class="sd">        :param branch_name: The name of branch</span>
<span class="sd">        :param content: File content</span>
<span class="sd">        :param commit_message: Commit message</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;file_path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">,</span> <span class="s">&quot;branch_name&quot;</span><span class="p">:</span> <span class="n">branch_name</span><span class="p">,</span>
                <span class="s">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span> <span class="s">&quot;commit_message&quot;</span><span class="p">:</span> <span class="n">commit_message</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/repository/files&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.updatefile"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.updatefile">[docs]</a>    <span class="k">def</span> <span class="nf">updatefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">branch_name</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">commit_message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates an existing file in the repository</span>
<span class="sd">        :param project_id: project id</span>
<span class="sd">        :param file_path: Full path to new file. Ex. lib/class.rb</span>
<span class="sd">        :param branch_name: The name of branch</span>
<span class="sd">        :param content: File content</span>
<span class="sd">        :param commit_message: Commit message</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;file_path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">,</span> <span class="s">&quot;branch_name&quot;</span><span class="p">:</span> <span class="n">branch_name</span><span class="p">,</span>
                <span class="s">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span> <span class="s">&quot;commit_message&quot;</span><span class="p">:</span> <span class="n">commit_message</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/repository/files&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletefile"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletefile">[docs]</a>    <span class="k">def</span> <span class="nf">deletefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">branch_name</span><span class="p">,</span> <span class="n">commit_message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes existing file in the repository</span>
<span class="sd">        :param project_id: project id</span>
<span class="sd">        :param file_path: Full path to new file. Ex. lib/class.rb</span>
<span class="sd">        :param branch_name: The name of branch</span>
<span class="sd">        :param commit_message: Commit message</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;file_path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">,</span> <span class="s">&quot;branch_name&quot;</span><span class="p">:</span> <span class="n">branch_name</span><span class="p">,</span>
                <span class="s">&quot;commit_message&quot;</span><span class="p">:</span> <span class="n">commit_message</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/repository/files&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.setgitlabciservice"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.setgitlabciservice">[docs]</a>    <span class="k">def</span> <span class="nf">setgitlabciservice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">project_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set GitLab CI service for project</span>
<span class="sd">        :param project_id: project id</span>
<span class="sd">        :param token: CI project token</span>
<span class="sd">        :param project_url: CI project url</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span> <span class="s">&quot;project_url&quot;</span><span class="p">:</span> <span class="n">project_url</span><span class="p">}</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/services/gitlab-ci&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Gitlab.deletegitlabciservice"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.gitlab.gitlab.html#JumpScale.baselib.gitlab.gitlab.Gitlab.deletegitlabciservice">[docs]</a>    <span class="k">def</span> <span class="nf">deletegitlabciservice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">project_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete GitLab CI service settings</span>
<span class="sd">        :return: true if success, false if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_url</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/services/gitlab-ci&quot;</span><span class="p">,</span>
                                  <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Jumpscale Doc 7.0 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    </div>
  </body>
</html>