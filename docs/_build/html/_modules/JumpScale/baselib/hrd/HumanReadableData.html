<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>JumpScale.baselib.hrd.HumanReadableData &mdash; Jumpscale Doc 7.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="Jumpscale Doc 7.0 documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Jumpscale Doc 7.0 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for JumpScale.baselib.hrd.HumanReadableData</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">JumpScale</span> <span class="kn">import</span> <span class="n">j</span>
<span class="kn">import</span> <span class="nn">JumpScale.baselib.codeexecutor</span>

<div class="viewcode-block" id="HumanReadableDataFactory"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataFactory">[docs]</a><span class="k">class</span> <span class="nc">HumanReadableDataFactory</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logenable</span><span class="o">=</span><span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loglevel</span><span class="o">=</span><span class="mi">5</span>

<div class="viewcode-block" id="HumanReadableDataFactory.log"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataFactory.log">[docs]</a>    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">msg</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">level</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">loglevel</span><span class="o">+</span><span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">logenable</span><span class="p">:</span>
            <span class="n">j</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;hrd.</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">category</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataFactory.getHRD"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataFactory.getHRD">[docs]</a>    <span class="k">def</span> <span class="nf">getHRD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">content</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @param path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">content</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">HRD</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">)</span>            
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">isDir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">HumanReadableDataTree</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">content</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HRD</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>        
</div>
    <span class="k">def</span> <span class="nf">_normalizeKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span><span class="s">&quot;_&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="HumanReadableDataFactory.replaceVarsInText"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataFactory.replaceVarsInText">[docs]</a>    <span class="k">def</span> <span class="nf">replaceVarsInText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">hrdtree</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="k">if</span> <span class="n">content</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">content</span>
            
        <span class="n">items</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">codetools</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">r&quot;\$\([\w.]*\)&quot;</span><span class="p">,</span><span class="n">content</span><span class="p">)</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;replace vars in hrdtree:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">hrdtree</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="s">&quot;replacevar&quot;</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                <span class="c"># print &quot;look for : %s&quot;%item</span>
                <span class="n">item2</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;(&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;)&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">position</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>                
                    <span class="n">newcontent</span><span class="o">=</span><span class="n">hrdtree</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newcontent</span><span class="o">=</span><span class="n">hrdtree</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">additionalArgs</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">item2</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
                    <span class="n">newcontent</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">[</span><span class="n">item2</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>

                <span class="c"># print &quot;nc:%s&quot;%newcontent</span>
                <span class="k">if</span> <span class="n">newcontent</span><span class="o">&lt;&gt;</span><span class="bp">False</span><span class="p">:</span>
                    <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">newcontent</span><span class="p">)</span>                        
                <span class="c"># else:</span>
                <span class="c">#     print &quot;notfound:%s&quot;%item</span>
        <span class="k">return</span> <span class="n">content</span>
</div>
<div class="viewcode-block" id="HumanReadableDataFactory.getHRDFromOsisObject"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataFactory.getHRDFromOsisObject">[docs]</a>    <span class="k">def</span> <span class="nf">getHRDFromOsisObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">osisobj</span><span class="p">,</span><span class="n">prefixRootObjectType</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">txt</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">serializers</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">osisobj</span><span class="o">.</span><span class="n">obj2dict</span><span class="p">())</span>
        <span class="n">prefix</span><span class="o">=</span><span class="n">osisobj</span><span class="o">.</span><span class="n">_P__meta</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">out</span><span class="o">=</span><span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">txt</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;_&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;_meta.&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">prefixRootObjectType</span><span class="p">:</span>
                <span class="n">out</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span><span class="n">line</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHRDFromContent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>        

        
</div></div>
<div class="viewcode-block" id="HRDPos"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos">[docs]</a><span class="k">class</span> <span class="nc">HRDPos</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">treeposition</span><span class="p">,</span><span class="n">tree</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span><span class="o">=</span><span class="p">{}</span>  <span class="c">#key to position (does not work when new keys in e.g. set)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="o">=</span><span class="p">{}</span> <span class="c">#id of hrd(file) to the hrd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">=</span><span class="n">tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_treeposition</span><span class="o">=</span>  <span class="n">treeposition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="bp">False</span>

<div class="viewcode-block" id="HRDPos.set"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">key2</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="c"># print &quot;set:&#39;%s&#39;:&#39;%s&#39;&quot;%(key,value)        </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key2</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">persistent</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
            <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHRD</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">hrd</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">persistent</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRDPos.getHRD"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getHRD">[docs]</a>    <span class="k">def</span> <span class="nf">getHRD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reloadCache</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span><span class="p">:</span>
                <span class="n">j</span><span class="o">.</span><span class="n">errorconditionhandler</span><span class="o">.</span><span class="n">raiseBug</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;Cannot find key:&#39;</span><span class="si">%s</span><span class="s">&#39; in hrd on position:&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span><span class="o">%</span>\
                    <span class="p">(</span><span class="n">key</span><span class="p">,(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treeposition</span><span class="p">)),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;osis.gethrd&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
</div>
    <span class="k">def</span> <span class="nf">_reloadCache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">hrd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addHrdItem</span><span class="p">(</span><span class="n">hrd</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>

<div class="viewcode-block" id="HRDPos.addHrdItem"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.addHrdItem">[docs]</a>    <span class="k">def</span> <span class="nf">addHrdItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hrd</span><span class="p">,</span><span class="n">hrdpos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hrds</span><span class="p">[</span><span class="n">hrdpos</span><span class="p">]</span><span class="o">=</span><span class="n">hrd</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">hrd</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;&gt;</span><span class="s">&quot;_&quot;</span><span class="p">)</span> <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">hrd</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_key2hrd</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">hrdpos</span>
</div>
<div class="viewcode-block" id="HRDPos.get"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>        
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reloadCache</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">checkExists</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">False</span>
                <span class="k">if</span> <span class="n">default</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s">&quot;Cannot find value with key </span><span class="si">%s</span><span class="s"> in tree </span><span class="si">%s</span><span class="s">.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_reloadCache</span><span class="p">()</span>

        <span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;$(&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">items</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">codetools</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">r&quot;\$\([\w.]*\)&quot;</span><span class="p">,</span><span class="n">val</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                <span class="c">#param found which needs to be filled in</span>
                <span class="n">item2</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;(&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;)&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">val2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item2</span><span class="p">)</span>
                <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">val2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;get in hrd:</span><span class="si">%s</span><span class="s"> &#39;</span><span class="si">%s</span><span class="s">&#39;:&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;get&quot;</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">val</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;return from get in hrd needs to be str, key:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">key</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">val</span>
</div>
<div class="viewcode-block" id="HRDPos.getBool"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getBool">[docs]</a>    <span class="k">def</span> <span class="nf">getBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default</span><span class="p">:</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="HRDPos.getList"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getList">[docs]</a>    <span class="k">def</span> <span class="nf">getList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRDPos.prefix"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.prefix">[docs]</a>    <span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">knownkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c"># print &quot;prefix: %s - %s&quot;%(knownkey,key)</span>
            <span class="k">if</span> <span class="n">knownkey</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">knownkey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRDPos.getDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getDict">[docs]</a>    <span class="k">def</span> <span class="nf">getDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">res2</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">)</span>
                <span class="n">res2</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">val</span>
        <span class="k">return</span> <span class="n">res2</span>
</div>
<div class="viewcode-block" id="HRDPos.setDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.setDict">[docs]</a>    <span class="k">def</span> <span class="nf">setDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">ddict</span><span class="p">):</span>
        <span class="n">out</span><span class="o">=</span><span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key2</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">ddict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">out</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">,&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key2</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
        <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">out</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRDPos.getInt"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getInt">[docs]</a>    <span class="k">def</span> <span class="nf">getInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">default</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>        
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&quot;none&quot;</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">elif</span> <span class="n">res</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="HRDPos.getFloat"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.getFloat">[docs]</a>    <span class="k">def</span> <span class="nf">getFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRDPos.exists"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRDPos.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>  
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;treeposition:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">_treeposition</span><span class="p">)</span>
        <span class="n">keys</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;&gt;</span><span class="s">&quot;_&quot;</span><span class="p">:</span>
                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;tree&quot;</span><span class="p">,</span><span class="s">&quot;treeposition&quot;</span><span class="p">,</span><span class="s">&quot;path&quot;</span><span class="p">]:</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;.&quot;</span><span class="p">:</span>
                        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                    
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>


</div>
<div class="viewcode-block" id="HRD"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD">[docs]</a><span class="k">class</span> <span class="nc">HRD</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">treeposition</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">tree</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">content</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">=</span><span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">=</span><span class="n">tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_treeposition</span><span class="o">=</span>  <span class="n">treeposition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="bp">False</span>

    <span class="k">def</span> <span class="nf">_markChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="bp">True</span>
        <span class="c"># if self._treeposition&lt;&gt;None:</span>
        <span class="c">#     self._treeposition.changed=True</span>

    <span class="k">def</span> <span class="nf">_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">)</span>    
        <span class="k">elif</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">boolean</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                <span class="n">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span>
        <span class="k">elif</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">valueout</span><span class="o">=</span><span class="s">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">valueout</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">,&quot;</span><span class="o">%</span><span class="n">item</span>
            <span class="n">value</span><span class="o">=</span><span class="n">valueout</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>                 
        <span class="k">elif</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">valueout</span><span class="o">=</span><span class="s">&quot;&quot;</span>
            <span class="n">test</span><span class="o">=</span><span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>                    
                <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">test</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                    <span class="n">valueout</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">,&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                <span class="n">test</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">value</span><span class="o">=</span><span class="n">valueout</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_unserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">,</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>    
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="HRD.set"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">key2</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key2</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">persistent</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_serialize</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
            <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;set in hrd:</span><span class="si">%s</span><span class="s"> &#39;</span><span class="si">%s</span><span class="s">&#39;:&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;set&quot;</span><span class="p">)</span>
            <span class="c"># print &quot;set in hrd itself: %s %s&quot;%(key,value)</span>
</div>
    <span class="k">def</span> <span class="nf">_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="n">out</span><span class="o">=</span><span class="s">&quot;&quot;</span>
        <span class="n">comment</span><span class="o">=</span><span class="s">&quot;&quot;</span> 
        <span class="n">keyfound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;#&quot;</span><span class="p">:</span>
                <span class="n">out</span><span class="o">+=</span><span class="n">line</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                <span class="c">#found line</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">comment</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">line2</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line2</span><span class="o">=</span><span class="n">line</span>
                <span class="n">key2</span><span class="p">,</span><span class="n">value2</span><span class="o">=</span><span class="n">line2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key2</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="n">key</span><span class="p">:</span>
                    <span class="n">keyfound</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">if</span> <span class="n">comment</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">line</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">=</span><span class="si">%s</span><span class="s"> #</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">comment</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">line</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">=</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
            <span class="n">comment</span><span class="o">=</span><span class="s">&quot;&quot;</span>
            <span class="n">out</span><span class="o">+=</span><span class="n">line</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">keyfound</span><span class="p">:</span>
            <span class="n">out</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">=</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span><span class="n">out</span><span class="p">)</span>

<div class="viewcode-block" id="HRD.delete"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="n">out</span><span class="o">=</span><span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">delete</span><span class="o">=</span><span class="bp">False</span>
            <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;#&quot;</span><span class="p">:</span>
                <span class="n">out</span><span class="o">+=</span><span class="n">line</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                <span class="c">#found line</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">comment</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">line2</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line2</span><span class="o">=</span><span class="n">line</span>
                <span class="n">key2</span><span class="p">,</span><span class="n">value2</span><span class="o">=</span><span class="n">line2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key2</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="n">key</span><span class="p">:</span>
                    <span class="n">delete</span> <span class="o">=</span> <span class="bp">True</span>

            <span class="n">comment</span><span class="o">=</span><span class="s">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">delete</span><span class="o">&lt;&gt;</span><span class="bp">True</span><span class="p">:</span>
                <span class="n">out</span><span class="o">+=</span><span class="n">line</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>

        <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span><span class="n">out</span><span class="p">)</span>


    <span class="c"># def write(self, path=None): #DO NO LONGER USE, DOES NOT WORK</span>
    <span class="c">#     C=&quot;&quot;</span>
    <span class="c">#     for key0 in self.__dict__:</span>
    <span class="c">#         if key0[0]==&quot;_&quot;:</span>
    <span class="c">#             continue</span>
    <span class="c">#         key=??? #cannot replace properly</span>
    <span class="c">#         C+=&quot;%s=%s\n&quot;%(key,self.__dict__[key0])</span>
    <span class="c">#     if path:</span>
    <span class="c">#         j.system.fs.writeFile(path,C)</span>
    <span class="c">#     else:</span>
    <span class="c">#         self._fixPath()</span>
    <span class="c">#         j.system.fs.createDir(j.system.fs.getDirName(self._path))</span>
    <span class="c">#         j.system.fs.writeFile(self._path,C)        </span>
                </div>
    <span class="k">def</span> <span class="nf">_fixPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;  &quot;</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">)</span>

<div class="viewcode-block" id="HRD.prefix"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.prefix">[docs]</a>    <span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">knownkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c"># print &quot;prefix: %s - %s&quot;%(knownkey,key)</span>
            <span class="k">if</span> <span class="n">knownkey</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">knownkey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.get"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">key2</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> 

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">checkExists</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="n">default</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Cannot find value with key </span><span class="si">%s</span><span class="s"> in tree </span><span class="si">%s</span><span class="s">.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="p">)</span>

        <span class="n">val</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key2</span><span class="p">]</span>

        <span class="n">content</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_unserialize</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="n">val</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;hrd:</span><span class="si">%s</span><span class="s"> get &#39;</span><span class="si">%s</span><span class="s">&#39;:&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">val</span>

</div>
<div class="viewcode-block" id="HRD.getBool"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getBool">[docs]</a>    <span class="k">def</span> <span class="nf">getBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default</span><span class="p">:</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>            
</div>
<div class="viewcode-block" id="HRD.getList"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getList">[docs]</a>    <span class="k">def</span> <span class="nf">getList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.getDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getDict">[docs]</a>    <span class="k">def</span> <span class="nf">getDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">res2</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;\k&quot;</span><span class="p">,</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
                <span class="n">res2</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">val</span>
        <span class="k">return</span> <span class="n">res2</span>
</div>
<div class="viewcode-block" id="HRD.setDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.setDict">[docs]</a>    <span class="k">def</span> <span class="nf">setDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">ddict</span><span class="p">):</span>        
        <span class="n">out</span><span class="o">=</span><span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key2</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">ddict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">out</span><span class="o">+=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">,&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key2</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
        <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">out</span><span class="p">)</span>        
</div>
<div class="viewcode-block" id="HRD.getInt"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getInt">[docs]</a>    <span class="k">def</span> <span class="nf">getInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">default</span><span class="o">&lt;&gt;</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">default</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>        
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">basetype</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&quot;none&quot;</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">elif</span> <span class="n">res</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="HRD.getFloat"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getFloat">[docs]</a>    <span class="k">def</span> <span class="nf">getFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.exists"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.read"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_ask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markChanged</span><span class="p">()</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;@ASK&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">tags</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">name</span><span class="o">=</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">):</span>
            <span class="n">ttype</span><span class="o">=</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;string&quot;</span><span class="p">:</span>
                <span class="n">ttype</span><span class="o">=</span><span class="s">&quot;str&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ttype</span><span class="o">=</span><span class="s">&quot;str&quot;</span>
        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;descr&quot;</span><span class="p">):</span>
            <span class="n">descr</span><span class="o">=</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;descr&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">descr</span><span class="o">=</span><span class="s">&quot;Please provide value for </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">name</span>

        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;__&quot;</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">)</span>

        <span class="n">descr</span><span class="o">=</span><span class="n">descr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;__&quot;</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">)</span>
        <span class="n">descr</span><span class="o">=</span><span class="n">descr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">,</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;default&quot;</span><span class="p">):</span>
            <span class="n">default</span><span class="o">=</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;default&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default</span><span class="o">=</span><span class="s">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;retry&quot;</span><span class="p">):</span>
            <span class="n">retry</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;retry&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">retry</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;regex&quot;</span><span class="p">):</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;regex&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;str&quot;</span><span class="p">:</span>
            <span class="n">result</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">askString</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="n">descr</span><span class="p">,</span> <span class="n">defaultparam</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;float&quot;</span><span class="p">:</span>
            <span class="n">result</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">askString</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="n">descr</span><span class="p">,</span> <span class="n">defaultparam</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="c">#check getFloat</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Please provide float.&quot;</span><span class="p">)</span>
            <span class="n">result</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        
        <span class="k">elif</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;int&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;minValue&quot;</span><span class="p">):</span>
                <span class="n">minValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;minValue&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">minValue</span> <span class="o">=</span> <span class="bp">None</span>

            <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;maxValue&quot;</span><span class="p">):</span>
                <span class="n">maxValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;maxValue&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxValue</span> <span class="o">=</span> <span class="bp">None</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">default</span><span class="p">:</span>
                <span class="n">default</span><span class="o">=</span><span class="bp">None</span>
            <span class="n">result</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">askInteger</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="n">descr</span><span class="p">,</span>  <span class="n">defaultValue</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">minValue</span><span class="o">=</span><span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="o">=</span><span class="n">maxValue</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;bool&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">descr</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">descr</span>
            <span class="n">result</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">askYesNo</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">result</span><span class="o">=</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">=</span><span class="mi">0</span>

        <span class="k">elif</span> <span class="n">ttype</span><span class="o">==</span><span class="s">&quot;dropdown&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">tagExists</span><span class="p">(</span><span class="s">&quot;dropdownvals&quot;</span><span class="p">):</span>
                <span class="n">dropdownvals</span><span class="o">=</span><span class="n">tags</span><span class="o">.</span><span class="n">tagGet</span><span class="p">(</span><span class="s">&quot;dropdownvals&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;When type is dropdown in ask, then dropdownvals needs to be specified as well.&quot;</span><span class="p">)</span>
            <span class="n">choicearray</span><span class="o">=</span><span class="n">dropdownvals</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
            <span class="n">result</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">askChoice</span><span class="p">(</span><span class="n">choicearray</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="n">descr</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Input type:</span><span class="si">%s</span><span class="s"> is invalid (only: bool,int,str,string,dropdown,float)&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
        
<div class="viewcode-block" id="HRD.checkValidity"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.checkValidity">[docs]</a>    <span class="k">def</span> <span class="nf">checkValidity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">template</span><span class="p">,</span><span class="n">hrddata</span><span class="o">=</span><span class="p">{}):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @param template is example hrd which will be used to check against, if params not found will be added to existing hrd and error will be thrown to allow user to configure settings</span>
<span class="sd">        &quot;&quot;&quot;</span>            
        <span class="n">error</span><span class="o">=</span><span class="bp">False</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">template</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;#&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">items</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">key</span><span class="o">=</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">defvalue</span><span class="o">=</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="c"># print &quot;key:%s &quot;%key</span>
                <span class="k">if</span> <span class="n">hrddata</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                    <span class="k">print</span> <span class="s">&quot;set:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">hrddata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">hrddata</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                    <span class="n">error</span><span class="o">=</span><span class="bp">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">defvalue</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="HRD.process"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.process">[docs]</a>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">content</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">codetools</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;#&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="c">#found line</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;@ASK&quot;</span><span class="p">)</span><span class="o">&lt;&gt;-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">j</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">shellconfig</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Can ask key </span><span class="si">%s</span><span class="s"> interactively. Config file was not complete, please change the default values of config file at location </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">))</span>

                    <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="HRD.getPath"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.getPath">[docs]</a>    <span class="k">def</span> <span class="nf">getPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">getPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_paths</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="HRD.pop"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.pop">[docs]</a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.has_key"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.has_key">[docs]</a>    <span class="k">def</span> <span class="nf">has_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="c"># def setDict(self,dictObject):</span>
    <span class="c">#     self.__dict__.update(dictObject)</span>
</div>
<div class="viewcode-block" id="HRD.applyOnDir"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.applyOnDir">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minmtime</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">maxmtime</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">changeFileName</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">changeContent</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;hrd:</span><span class="si">%s</span><span class="s"> apply on dir:</span><span class="si">%s</span><span class="s"> &quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span><span class="n">path</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;apply&quot;</span><span class="p">)</span>
        
        <span class="n">items</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">listFilesInDir</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">minmtime</span><span class="o">=</span><span class="n">minmtime</span><span class="p">,</span> <span class="n">maxmtime</span><span class="o">=</span><span class="n">maxmtime</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">changeFileName</span><span class="p">:</span>
                <span class="n">item2</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">item2</span><span class="o">&lt;&gt;</span><span class="n">item</span><span class="p">:</span>
                     <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">renameFile</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">item2</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">changeContent</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applyOnFile</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.applyOnFile"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.applyOnFile">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;hrd:</span><span class="si">%s</span><span class="s"> apply on file:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="n">path</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;apply&quot;</span><span class="p">)</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
        <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HRD.applyOnContent"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HRD.applyOnContent">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnContent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">content</span>
</div>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># parts = [&quot;path:%s&quot;%self._path]</span>
        <span class="c"># parts.append(&quot;treeposition:%s&quot;%self._treeposition)</span>
        <span class="n">parts</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">keys</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;&gt;</span><span class="s">&quot;_&quot;</span><span class="p">:</span>
                <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">_normalizeKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;.&quot;</span><span class="p">:</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="HumanReadableDataTree"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree">[docs]</a><span class="k">class</span> <span class="nc">HumanReadableDataTree</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">content</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">=</span><span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hrds</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hrdpaths</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">pathNormalize</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>        
            <span class="bp">self</span><span class="o">.</span><span class="n">add2tree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">=</span><span class="bp">None</span>
        <span class="k">if</span> <span class="n">content</span><span class="o">&lt;&gt;</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add2treeFromContent</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="bp">False</span>

<div class="viewcode-block" id="HumanReadableDataTree.getPosition"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">startpath</span><span class="p">,</span><span class="n">curpath</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>  
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
        <span class="c"># curpath=j.system.fs.getDirName(curpath+&quot;/&quot;)</span>
        <span class="c"># print &quot;path:%s&quot;%self.path</span>
        <span class="n">key</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">pathRemoveDirPart</span><span class="p">(</span><span class="n">curpath</span><span class="p">,</span><span class="n">startpath</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">res</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span><span class="o">=</span><span class="n">key</span>
        <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">,</span><span class="s">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;//&quot;</span><span class="p">,</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="HumanReadableDataTree.add2treeFromContent"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.add2treeFromContent">[docs]</a>    <span class="k">def</span> <span class="nf">add2treeFromContent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">treeposition</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">treeposition</span><span class="p">]</span><span class="o">=</span><span class="n">HRDPos</span><span class="p">(</span><span class="n">treeposition</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">hrdposObject</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">treeposition</span><span class="p">]</span>
        <span class="n">hrd</span><span class="o">=</span><span class="n">HRD</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">treeposition</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hrds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hrd</span><span class="p">)</span>
        <span class="n">hrdpos</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hrds</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>        
        <span class="n">hrd</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">hrdposObject</span><span class="o">.</span><span class="n">addHrdItem</span><span class="p">(</span><span class="n">hrd</span><span class="p">,</span><span class="n">hrdpos</span><span class="o">=</span><span class="n">hrdpos</span><span class="p">)</span> 
</div>
<div class="viewcode-block" id="HumanReadableDataTree.add2tree"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.add2tree">[docs]</a>    <span class="k">def</span> <span class="nf">add2tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">startpath</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">path</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">pathNormalize</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">startpath</span><span class="o">==</span><span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">startpath</span><span class="o">=</span><span class="n">path</span>
        <span class="c"># self.positions[startpoint]=[HRD(path,startpoint,self)]</span>

        <span class="n">paths</span><span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">listFilesInDir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s">&quot;*.hrd&quot;</span><span class="p">)</span>
        
        <span class="n">treeposition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">startpath</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">position</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">treeposition</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">treeposition</span><span class="p">]</span><span class="o">=</span><span class="n">HRDPos</span><span class="p">(</span><span class="n">treeposition</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">hrdposObject</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">treeposition</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">pathfound</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>

            <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;Add hrd </span><span class="si">%s</span><span class="s"> to position:&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pathfound</span><span class="p">,</span><span class="n">treeposition</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s">&quot;load&quot;</span><span class="p">)</span>
                        
            <span class="n">hrd</span><span class="o">=</span><span class="n">HRD</span><span class="p">(</span><span class="n">pathfound</span><span class="p">,</span><span class="n">treeposition</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">hrd</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">hrds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hrd</span><span class="p">)</span>
            <span class="n">hrdpos</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hrds</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hrdpaths</span><span class="p">[</span><span class="n">hrd</span><span class="o">.</span><span class="n">_path</span><span class="p">]</span><span class="o">=</span><span class="n">hrdpos</span>

            <span class="k">for</span> <span class="n">hrdparent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentHRDs</span><span class="p">(</span><span class="n">treeposition</span><span class="p">):</span>
                <span class="n">hrdposObject</span><span class="o">.</span><span class="n">addHrdItem</span><span class="p">(</span><span class="n">hrdparent</span><span class="p">,</span><span class="n">hrdpos</span><span class="o">=</span><span class="n">hrdpos</span><span class="p">)</span>
            <span class="n">hrdposObject</span><span class="o">.</span><span class="n">addHrdItem</span><span class="p">(</span><span class="n">hrd</span><span class="p">,</span><span class="n">hrdpos</span><span class="o">=</span><span class="n">hrdpos</span><span class="p">)</span>            

        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="n">dirs</span><span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">listDirsInDir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ddir</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add2tree</span><span class="p">(</span><span class="n">ddir</span><span class="p">,</span><span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="n">treeposition</span><span class="p">,</span><span class="n">startpath</span><span class="o">=</span><span class="n">startpath</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getParentHRDs"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getParentHRDs">[docs]</a>    <span class="k">def</span> <span class="nf">getParentHRDs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">treeposition</span><span class="p">):</span>
        <span class="n">res</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">poskey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">poskey</span><span class="p">]</span>
            <span class="n">treeposition2</span><span class="o">=</span><span class="n">pos</span><span class="o">.</span><span class="n">_treeposition</span>
            <span class="k">if</span> <span class="n">treeposition2</span> <span class="ow">in</span> <span class="n">treeposition</span> <span class="ow">and</span> <span class="n">treeposition2</span><span class="o">&lt;&gt;</span><span class="n">treeposition</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">hrdid</span> <span class="ow">in</span> <span class="n">pos</span><span class="o">.</span><span class="n">_hrds</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">res</span><span class="p">[</span><span class="n">hrdid</span><span class="p">]</span><span class="o">=</span><span class="n">pos</span><span class="o">.</span><span class="n">_hrds</span><span class="p">[</span><span class="n">hrdid</span><span class="p">]</span>
        <span class="n">res2</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">res2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            
        <span class="k">return</span> <span class="n">res2</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.exists"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hrd</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.prefix"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.prefix">[docs]</a>    <span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="p">]</span>
        <span class="k">for</span> <span class="n">hrd</span> <span class="ow">in</span> <span class="n">hrds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">newkey</span> <span class="ow">in</span> <span class="n">hrd</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">newkey</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getItemsFromPrefix"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getItemsFromPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">getItemsFromPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns values from prefix return as list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="p">]</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">hrd</span> <span class="ow">in</span> <span class="n">hrds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">newkey</span> <span class="ow">in</span> <span class="n">hrd</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hrd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">newkey</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getKeysFromPrefix"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getKeysFromPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">getKeysFromPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns keys from prefix return as list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hrds</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="p">]</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">hrd</span> <span class="ow">in</span> <span class="n">hrds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">newkey</span> <span class="ow">in</span> <span class="n">hrd</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newkey</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>        
</div>
<div class="viewcode-block" id="HumanReadableDataTree.get"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="n">checkExists</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">checkExists</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hrd</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>

        <span class="n">val</span><span class="o">=</span><span class="n">hrd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="n">checkExists</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">checkExists</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">val</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">val</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getInt"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getInt">[docs]</a>    <span class="k">def</span> <span class="nf">getInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getFloat"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getFloat">[docs]</a>    <span class="k">def</span> <span class="nf">getFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">getFloat</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getBool"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getBool">[docs]</a>    <span class="k">def</span> <span class="nf">getBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">getBool</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getList"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getList">[docs]</a>    <span class="k">def</span> <span class="nf">getList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">getList</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getDict">[docs]</a>    <span class="k">def</span> <span class="nf">getDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">getDict</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.setDict"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.setDict">[docs]</a>    <span class="k">def</span> <span class="nf">setDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">ddict</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>                
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hrd</span><span class="o">.</span><span class="n">setDict</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">ddict</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.getHrd"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.getHrd">[docs]</a>    <span class="k">def</span> <span class="nf">getHrd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">checkExists</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">checkExists</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Cannot find position </span><span class="si">%s</span><span class="s"> in tree </span><span class="si">%s</span><span class="s">.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>

        <span class="n">orgpos</span><span class="o">=</span><span class="n">position</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
        <span class="c"># x=0</span>
        <span class="c"># while not hrd.exists(key):</span>
        <span class="c">#     # print &quot;search:%s pos:%s\n%s\n\n&quot;%(key,position,hrd)</span>
        <span class="c">#     #look for next in array on position</span>
        <span class="c">#     if x&lt;len(self.positions[position])-1:</span>
        <span class="c">#         x+=1</span>
        <span class="c">#         hrd=self.positions[position][x]</span>
        <span class="c">#     #look for position higher</span>
        <span class="c">#     elif position.find(&quot;/&quot;)&lt;&gt;-1:</span>
        <span class="c">#         x=0</span>
        <span class="c">#         position=&quot;/&quot;.join(position.split(&quot;/&quot;)[:-1])</span>
        <span class="c">#         hrd=self.positions[position][0]</span>
        <span class="c">#     #rootposition</span>
        <span class="c">#     elif position.strip()&lt;&gt;&quot;&quot;:</span>
        <span class="c">#         x=0</span>
        <span class="c">#         position=&quot;&quot;</span>
        <span class="c">#         hrd=self.positions[position][0]</span>
        <span class="c">#     else:</span>
        <span class="c">#         if checkExists:</span>
        <span class="c">#             return False</span>
        <span class="c">#         raise RuntimeError(&quot;Cannot find value with key %s in tree %s on position:%s&quot;%(key,self.path,orgpos))</span>
        <span class="k">return</span> <span class="n">hrd</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.set"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">hrd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getHrd</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="n">hrd</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">persistent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.applyOnDir"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.applyOnDir">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minmtime</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">maxmtime</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">changeFileName</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">changeContent</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;hrd:</span><span class="si">%s</span><span class="s"> apply on dir:</span><span class="si">%s</span><span class="s"> in position:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">position</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;apply&quot;</span><span class="p">)</span>
        
        <span class="n">items</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">listFilesInDir</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">minmtime</span><span class="o">=</span><span class="n">minmtime</span><span class="p">,</span> <span class="n">maxmtime</span><span class="o">=</span><span class="n">maxmtime</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">changeFileName</span><span class="p">:</span>
                <span class="n">item2</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">position</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">item2</span><span class="o">&lt;&gt;</span><span class="n">item</span><span class="p">:</span>
                     <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">renameFile</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">item2</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">changeContent</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applyOnFile</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.applyOnFile"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.applyOnFile">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;hrd:</span><span class="si">%s</span><span class="s"> apply on file:</span><span class="si">%s</span><span class="s"> in position:</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">position</span><span class="p">),</span><span class="n">category</span><span class="o">=</span><span class="s">&quot;apply&quot;</span><span class="p">)</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">fileGetContents</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">position</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
        <span class="n">j</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HumanReadableDataTree.applyOnContent"><a class="viewcode-back" href="../../../../API/JumpScale.baselib.hrd.html#JumpScale.baselib.hrd.HumanReadableData.HumanReadableDataTree.applyOnContent">[docs]</a>    <span class="k">def</span> <span class="nf">applyOnContent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">content</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">hrd</span><span class="o">.</span><span class="n">replaceVarsInText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">position</span><span class="p">,</span><span class="n">additionalArgs</span><span class="o">=</span><span class="n">additionalArgs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">content</span>
</div>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Jumpscale Doc 7.0 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    </div>
  </body>
</html>